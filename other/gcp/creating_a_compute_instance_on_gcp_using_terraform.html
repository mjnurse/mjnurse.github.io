<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Google Cloud Platform" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/fa62c117c7.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/lunr/lunr.js"></script>
    <link rel="stylesheet" href="/static/styles.css" />
    <link rel="stylesheet" href="/static/syntax.css" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <title>Google Cloud Platform</title>
  </head>
  <body class="light" id="top">
    <header class="header center">
      <h3>
        <a href="/" class="link">MjN</a>
      </h3>

      <nav class="nav center">
        <ul class="nav__list center">
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/blog/" data-shortcut="b"><strong>b</strong>log</a>
          </li>
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/cheatsheets/" data-shortcut="c"><strong>c</strong>heatsheets</a>
          </li>
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/elasticsearch/" data-shortcut="e"><strong>e</strong>lasticsearch</a>
          </li>
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/js/" data-shortcut="j"><strong>j</strong>s</a>
          </li>
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/linuxbash/" data-shortcut="l"><strong>l</strong>inuxbash</a>
          </li>
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/misc/" data-shortcut="m"><strong>m</strong>isc</a>
          </li>
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/notes/" data-shortcut="n"><strong>n</strong>otes</a>
          </li>
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/other/" data-shortcut="o"><strong>o</strong>ther</a>
          </li>
          
          <li class="nav__list-item">
            <a class="link link--nav" href="/shortcutkeys/" data-shortcut="s"><strong>s</strong>hortcutkeys</a>
          </li>
          
        </ul>

        <button type="button" aria-label="search" id="searchBtn" class="btn btn--icon">
          <i aria-hidden="true" class="fas fa-search"></i>
        </button>

        <button type="button" aria-label="toggle theme" class="btn btn--icon">
          <i aria-hidden="true" id="btn-theme" class="fas fa-moon"></i>
        </button>

        <button
          type="button"
          aria-label="toggle navigation"
          class="btn btn--icon nav__hamburger"
        >
          <i aria-hidden="true" class="fas fa-bars"></i>
        </button>
      </nav>
    </header>

    <main>
      <article class="article">
        <div class="article-body">
          <h1>Google Cloud Platform</h1>
<h1 id="creating-a-compute-instance-on-gcp-using-terraform">Creating a Compute Instance on GCP Using Terraform</h1>
<h3 id="download-and-install-terraform">Download and Install terraform</h3>
<p>Download the most recent version of Terraform.  No install, its just an executable.  Move it to an accessible location.</p>
<pre class="codehilite"><code>&gt; wget https://releases.hashicorp.com/terraform/0.11.11/terraform_0.11.11_linux_amd64.zip
...
&gt; unzip terraform_0.11.11_linux_amd64.zip
...
&gt; mv terraform ~/bin
...
&gt; terraform --version
Terraform v0.11.11
</code></pre>

<h3 id="create-a-terraform-config-file">Create a terraform Config File</h3>
<p>Create a provider config file: <code>main.tf</code></p>
<pre class="codehilite"><code>provider &quot;google&quot; {
  project = &quot;mjnurse-terraform&quot;
  region  = &quot;us-central1&quot;
  zone    = &quot;us-central1-c&quot;
}

resource &quot;google_compute_instance&quot; &quot;vm_instance&quot; {
  name         = &quot;terraform-instance&quot;
  #machine_type = &quot;f1-micro&quot;
  machine_type = &quot;n1-standard-4&quot;

  boot_disk {
    initialize_params {
      image = &quot;debian-cloud/debian-9&quot;
    }
  }

  network_interface {
    # A default network is created for all GCP projects
    network       = &quot;${google_compute_network.vpc_network.self_link}&quot;
    access_config = {
    }
  }
}

resource &quot;google_compute_network&quot; &quot;vpc_network&quot; {
  name                    = &quot;terraform-network&quot;
  auto_create_subnetworks = &quot;true&quot;
}
</code></pre>

<h3 id="set-up-the-required-credentials">Set Up the Required Credentials</h3>
<p>From the Navigation Menu, select APIs &amp; Services, Credentials.  From the Create credentials drop down, select 'Service account key'.  ENsure that the JSON option is selected amd choose the 'Compute Engine default service account' from the drop down.  Click create and a JSON document will be downloaded by the browser.</p>
<p>Copy the contents of the JSON download in to a file called google_cloud_keyfile.json.</p>
<p>create and environment variavle to point to this file:</p>
<pre class="codehilite"><code>&gt; export GOOGLE_CLOUD_KEYFILE_JSON=google_cloud_keyfile.json
</code></pre>

<h3 id="run-the-terraform-script-to-create-the-compute-instance">Run the terraform Script to Create the Compute Instance</h3>
<p>Run terraform init:</p>
<pre class="codehilite"><code>&gt; terraform init

* provider.google: version = &quot;~&gt; 2.0&quot;

Terraform has been successfully initialized!
</code></pre>

<p>Run the terraform <code>main.tf</code> script:</p>
<pre class="codehilite"><code>&gt; terraform apply

martin@website-builder:~/terraform$ terraform apply
google_compute_network.vpc_network: Refreshing state... (ID: terraform-network)
google_compute_instance.vm_instance: Refreshing state... (ID: terraform-instance)

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
...
Plan: 1 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

google_compute_instance.vm_instance: Creating...
...
google_compute_instance.vm_instance: Still creating... (10s elapsed)
google_compute_instance.vm_instance: Still creating... (20s elapsed)
google_compute_instance.vm_instance: Creation complete after 29s (ID: terraform-instance)

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
</code></pre>

<h3 id="removing-the-compute-instance">Removing the Compute Instance</h3>
<pre class="codehilite"><code>&gt; terraform destroy

google_compute_network.vpc_network: Refreshing state... (ID: terraform-network)
google_compute_instance.vm_instance: Refreshing state... (ID: terraform-instance)

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:
  - google_compute_instance.vm_instance
  - google_compute_network.vpc_network

Plan: 0 to add, 0 to change, 2 to destroy.

Do you really want to destroy all resources?
  Terraform will destroy all your managed infrastructure, as shown above.
  There is no undo. Only 'yes' will be accepted to confirm.

  Enter a value: yes

google_compute_instance.vm_instance: Destroying... (ID: terraform-instance)
google_compute_instance.vm_instance: Destruction complete after 4s
google_compute_network.vpc_network: Destroying... (ID: terraform-network)
google_compute_network.vpc_network: Still destroying... (ID: terraform-network, 1m0s elapsed)
google_compute_network.vpc_network: Destruction complete after 1m6s

Destroy complete! Resources: 2 destroyed.
</code></pre>

<hr>
        </div>
      </article>
    </main>

    <footer class="footer">
      <p>
        <a href="/about_me.html" class="link">About Me</a> | 
        <a href="/help.html" class="link">Help</a>
      </p>
      <p>
        <a href="https://github.com/mjnurse" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="link footer__link">
          <i aria-hidden="true" class="fab fa-github"></i>
        </a>
        <a href="https://www.linkedin.com/in/martin-nurse" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="link footer__link">
          <i aria-hidden="true" class="fab fa-linkedin"></i>
        </a>
      </p>
      <p>Last updated: December 11, 2025</p>
    </footer>

    <div class="scroll-container">
      <div class="scroll-top">
        <a aria-label="Scroll up" href="#top">
          <i aria-hidden="true" class="fas fa-arrow-up"></i>
        </a>
      </div>
    </div>

    <script src="/static/page-nav.js"></script>
    <script src="/static/script.js"></script>
    <script src="/static/search.js"></script>
  </body>
</html>